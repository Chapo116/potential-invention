<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ApexBroker ‚Äì Admin Panel</title>
<link rel="stylesheet" href="css/dashboard.css">
<style>
  :root{--primary:#1a73e8;--danger:#e53935;--success:#43a047;--warning:#fb8c00;--bg:#0f1117;--card:#1a1d2e;--sidebar:#13162b;--text:#e0e0e0;--muted:#8892a4;}
  *{box-sizing:border-box;margin:0;padding:0;}
  body{background:var(--bg);color:var(--text);font-family:'Segoe UI',sans-serif;display:flex;min-height:100vh;}
  .sidebar{width:240px;background:var(--sidebar);padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;overflow-y:auto;}
  .sidebar .logo{padding:0 24px 24px;font-size:1.4rem;font-weight:700;color:#fff;border-bottom:1px solid #ffffff15;}
  .sidebar .logo span{color:var(--primary);}
  .sidebar .badge{font-size:.65rem;background:var(--danger);color:#fff;padding:2px 6px;border-radius:10px;margin-left:6px;}
  .nav-item{display:flex;align-items:center;gap:10px;padding:12px 24px;cursor:pointer;color:var(--muted);transition:all .2s;font-size:.9rem;}
  .nav-item:hover,.nav-item.active{background:#ffffff10;color:#fff;border-left:3px solid var(--primary);}
  .main{margin-left:240px;flex:1;padding:30px;}
  .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;}
  .topbar h1{font-size:1.5rem;font-weight:600;}
  .btn{padding:8px 18px;border:none;border-radius:8px;cursor:pointer;font-size:.85rem;font-weight:600;transition:all .2s;}
  .btn-primary{background:var(--primary);color:#fff;}
  .btn-success{background:var(--success);color:#fff;}
  .btn-danger{background:var(--danger);color:#fff;}
  .btn-warning{background:var(--warning);color:#fff;}
  .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:18px;margin-bottom:28px;}
  .stat-card{background:var(--card);border-radius:12px;padding:20px;border:1px solid #ffffff10;}
  .stat-card .label{font-size:.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px;}
  .stat-card .value{font-size:1.7rem;font-weight:700;color:#fff;}
  .stat-card .sub{font-size:.75rem;color:var(--muted);margin-top:4px;}
  .card{background:var(--card);border-radius:12px;padding:22px;border:1px solid #ffffff10;margin-bottom:22px;}
  .card h3{font-size:1rem;margin-bottom:16px;color:#fff;}
  table{width:100%;border-collapse:collapse;font-size:.85rem;}
  th{text-align:left;padding:10px;color:var(--muted);border-bottom:1px solid #ffffff15;font-weight:500;}
  td{padding:10px;border-bottom:1px solid #ffffff08;vertical-align:middle;}
  tr:last-child td{border-bottom:none;}
  .badge-pill{padding:3px 10px;border-radius:20px;font-size:.72rem;font-weight:600;}
  .badge-active{background:#43a04720;color:#43a047;}
  .badge-pending{background:#fb8c0020;color:#fb8c00;}
  .badge-completed{background:#1a73e820;color:#1a73e8;}
  .badge-rejected{background:#e5393520;color:#e53935;}
  .badge-admin{background:#9c27b020;color:#ce93d8;}
  .tab-btns{display:flex;gap:8px;margin-bottom:18px;flex-wrap:wrap;}
  .tab-btn{padding:7px 16px;border-radius:20px;border:1px solid #ffffff20;background:transparent;color:var(--muted);cursor:pointer;font-size:.82rem;transition:all .2s;}
  .tab-btn.active{background:var(--primary);color:#fff;border-color:var(--primary);}
  .modal{display:none;position:fixed;inset:0;background:#00000080;z-index:1000;align-items:center;justify-content:center;}
  .modal.open{display:flex;}
  .modal-box{background:var(--card);border-radius:14px;padding:28px;width:420px;max-width:95vw;}
  .modal-box h3{margin-bottom:18px;font-size:1rem;}
  .form-group{margin-bottom:14px;}
  .form-group label{font-size:.8rem;color:var(--muted);display:block;margin-bottom:5px;}
  .form-group input,.form-group select{width:100%;padding:9px 12px;background:#0f1117;border:1px solid #ffffff20;border-radius:8px;color:#fff;font-size:.88rem;}
  .modal-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:18px;}
  .section{display:none;}.section.active{display:block;}
  #toast{position:fixed;bottom:24px;right:24px;background:#2d3748;color:#fff;padding:12px 20px;border-radius:10px;font-size:.85rem;z-index:9999;transform:translateY(100px);transition:transform .3s;opacity:0;}
  #toast.show{transform:translateY(0);opacity:1;}
</style>
</head>
<body>

<aside class="sidebar">
  <div class="logo">Apex<span>Broker</span> <span class="badge">ADMIN</span></div>
  <nav>
    <div class="nav-item active" data-section="overview">üìä Overview</div>
    <div class="nav-item" data-section="users">üë• Users</div>
    <div class="nav-item" data-section="investments">üíº Investments</div>
    <div class="nav-item" data-section="transactions">üí≥ Transactions</div>
    <div class="nav-item" data-section="create-admin">üõ°Ô∏è Create Admin</div>
    <div style="margin-top:auto;padding:24px;">
      <div class="nav-item" id="logoutBtn" style="color:#e53935;">üö™ Logout</div>
    </div>
  </nav>
</aside>

<main class="main">
  <div class="topbar">
    <h1 id="sectionTitle">Admin Overview</h1>
    <div id="adminName" style="color:var(--muted);font-size:.88rem;"></div>
  </div>

  <!-- Overview -->
  <section class="section active" id="section-overview">
    <div class="stats-grid" id="statsGrid">
      <div class="stat-card"><div class="label">Total Users</div><div class="value" id="statUsers">‚Äî</div></div>
      <div class="stat-card"><div class="label">Total Invested</div><div class="value" id="statInvested">‚Äî</div></div>
      <div class="stat-card"><div class="label">Active Investments</div><div class="value" id="statActive">‚Äî</div></div>
      <div class="stat-card"><div class="label">Pending Transactions</div><div class="value" id="statPending">‚Äî</div></div>
      <div class="stat-card"><div class="label">Total Transactions</div><div class="value" id="statTxns">‚Äî</div></div>
    </div>
    <div class="card">
      <h3>Recent Users</h3>
      <table><thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Balance</th><th>Role</th><th>Action</th></tr></thead>
      <tbody id="recentUsersTbl"><tr><td colspan="6" style="text-align:center;color:var(--muted)">Loading‚Ä¶</td></tr></tbody></table>
    </div>
    <div class="card">
      <h3>Pending Transactions</h3>
      <table><thead><tr><th>ID</th><th>User</th><th>Type</th><th>Amount</th><th>Hash</th><th>Action</th></tr></thead>
      <tbody id="pendingTxnsTbl"><tr><td colspan="6" style="text-align:center;color:var(--muted)">Loading‚Ä¶</td></tr></tbody></table>
    </div>
  </section>

  <!-- Users -->
  <section class="section" id="section-users">
    <div class="card">
      <h3>All Users</h3>
      <table><thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Balance</th><th>Role</th><th>Status</th><th>Actions</th></tr></thead>
      <tbody id="allUsersTbl"><tr><td colspan="7" style="text-align:center;color:var(--muted)">Loading‚Ä¶</td></tr></tbody></table>
    </div>
  </section>

  <!-- Investments -->
  <section class="section" id="section-investments">
    <div class="card">
      <h3>All Investments</h3>
      <table><thead><tr><th>ID</th><th>User</th><th>Plan</th><th>Amount</th><th>Profit</th><th>Status</th><th>Action</th></tr></thead>
      <tbody id="allInvTbl"><tr><td colspan="7" style="text-align:center;color:var(--muted)">Loading‚Ä¶</td></tr></tbody></table>
    </div>
  </section>

  <!-- Transactions -->
  <section class="section" id="section-transactions">
    <div class="tab-btns">
      <button class="tab-btn active" data-filter="">All</button>
      <button class="tab-btn" data-filter="deposit">Deposits</button>
      <button class="tab-btn" data-filter="withdrawal">Withdrawals</button>
      <button class="tab-btn" data-filter="pending">Pending</button>
    </div>
    <div class="card">
      <h3>Transactions</h3>
      <table><thead><tr><th>ID</th><th>User</th><th>Type</th><th>Amount</th><th>Status</th><th>Hash</th><th>Action</th></tr></thead>
      <tbody id="allTxnsTbl"><tr><td colspan="7" style="text-align:center;color:var(--muted)">Loading‚Ä¶</td></tr></tbody></table>
    </div>
  </section>

  <!-- Create Admin -->
  <section class="section" id="section-create-admin">
    <div class="card" style="max-width:480px;">
      <h3>Create New Admin Account</h3>
      <form id="createAdminForm">
        <div class="form-group"><label>Full Name</label><input type="text" id="adminFullName" placeholder="Admin Name" required></div>
        <div class="form-group"><label>Email</label><input type="email" id="adminEmail" placeholder="admin@example.com" required></div>
        <div class="form-group"><label>Password</label><input type="password" id="adminPassword" placeholder="Minimum 8 characters" required></div>
        <button type="submit" class="btn btn-primary" style="width:100%;margin-top:8px;">Create Admin</button>
      </form>
    </div>
  </section>
</main>

<!-- Balance Modal -->
<div class="modal" id="balanceModal">
  <div class="modal-box">
    <h3>Update User Balance</h3>
    <input type="hidden" id="balanceUserId">
    <div class="form-group"><label>User</label><input type="text" id="balanceUserName" readonly></div>
    <div class="form-group"><label>Amount ($)</label><input type="number" id="balanceAmount" placeholder="Enter amount"></div>
    <div class="form-group"><label>Action</label>
      <select id="balanceAction">
        <option value="add">Add Balance</option>
        <option value="subtract">Subtract Balance</option>
        <option value="set">Set Balance</option>
      </select>
    </div>
    <div class="modal-footer">
      <button class="btn" onclick="closeModal('balanceModal')" style="background:#ffffff15;color:#fff">Cancel</button>
      <button class="btn btn-primary" onclick="updateBalance()">Update</button>
    </div>
  </div>
</div>

<div id="toast"></div>
<script src="js/config.js"></script>
<script src="js/admin.js"></script>
</body>
</html>
